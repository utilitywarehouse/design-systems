import { Meta, Canvas, Story } from '@storybook/blocks';
import * as Stories from './Carousel.stories';
import { Alert, Center, Text, Box } from '../../';
import { Carousel, CarouselItem, CarouselItems, CarouselPagination } from './';
import { colors } from '@utilitywarehouse/colour-system';
import { BackToTopButton, DocComponentWrap, UsageWrap } from '../../../docs/components';

<Meta title="Lab Components / Carousel (Lab)" />

<BackToTopButton />

# Carousel

The carousel is a component for presenting information in a manner for customers to scroll through. This is typically when you have multiple banners, or CTA's, etc, although there are many other functional use cases.

- [Usage](#usage)
  - [Basic Usage](#basic-usage)
  - [Carousel with Pagination](#carousel-with-pagination)
- [Props](#props)

<DocComponentWrap>
  <Box mb="$4">
    <Alert text="This component is in the lab until it has been more widely implemented and any implementations standardised." />
  </Box>
  <Box mb="$6">
    <Alert
      colorScheme="gold"
      text="The carousel implements a FlatList. Some props cannot be modified. This is to ensure standardised behaviour and presentation."
    />
  </Box>
</DocComponentWrap>

## Usage

- The `Carousel` component is to be used for presenting scrollable data
- The `Carousel` scrolls horizontally only
- Most `Carousel` behaviour is predefined for a standardised behaviour and experience across apps
- Some props can be modified to offer customised behaviour

## Basic Usage

<UsageWrap>
  <Center flex={1}>
    <Carousel>
      <CarouselItems width={300}>
        <CarouselItem>
          <Box p="$2" aspectRatio={1.6} backgroundColor="$purple800">
            <Text color="$white">I'm a Carousel item!</Text>
          </Box>
        </CarouselItem>
        <CarouselItem>
          <Box p="$2" aspectRatio={1.6} backgroundColor="$red800">
            <Text color="$white">I'm another Carousel item!</Text>
          </Box>
        </CarouselItem>
      </CarouselItems>
    </Carousel>
  </Center>
</UsageWrap>

```jsx
import { Text } from '@utilitywarehouse/native-ui';
import { Box, Carousel, CarouselItem, CarouselItems } from '@utilitywarehouse/native-ui/lab';

const MyComponent = () => (
  <Carousel>
    <CarouselItems width={300}>
      <CarouselItem>
        <Box p="$2" aspectRatio={1.6} backgroundColor="$purple800">
          <Text color="$white">I'm a Carousel item!</Text>
        </Box>
      </CarouselItem>
      <CarouselItem>
        <Box p="$2" aspectRatio={1.6} backgroundColor="$red800">
          <Text color="$white">I'm another Carousel item!</Text>
        </Box>
      </CarouselItem>
    </CarouselItems>
  </Carousel>
);
```

### Carousel with Pagination

The `CarouselPagination` component is to be used in conjunction with the `Carousel` component. This component requires no props and automatically utilises the carousel context.

<UsageWrap>
  <Center flex={1}>
    <Carousel>
      <CarouselItems width={300}>
        <CarouselItem>
          <Box p="$2" aspectRatio={1.6} backgroundColor="$purple800">
            <Text color="$white">I'm a Carousel item!</Text>
          </Box>
        </CarouselItem>
        <CarouselItem>
          <Box p="$2" aspectRatio={1.6} backgroundColor="$red800">
            <Text color="$white">I'm another Carousel item!</Text>
          </Box>
        </CarouselItem>
      </CarouselItems>
      <CarouselPagination style={{ marginTop: 16 }} />
    </Carousel>
  </Center>
</UsageWrap>

```jsx
import { Text } from '@utilitywarehouse/native-ui';
import { Box, Carousel, CarouselPagination } from '@utilitywarehouse/native-ui/lab';

const MyComponent = () => (
  <Carousel>
    <CarouselItems width={300}>
      <CarouselItem>
        <Box p="$2" aspectRatio={1.6} backgroundColor="$purple800">
          <Text color="$white">I'm a Carousel item!</Text>
        </Box>
      </CarouselItem>
      <CarouselItem>
        <Box p="$2" aspectRatio={1.6} backgroundColor="$red800">
          <Text color="$white">I'm another Carousel item!</Text>
        </Box>
      </CarouselItem>
    </CarouselItems>
    <CarouselPagination style={{ marginTop: 16 }} />
  </Carousel>
);
```

## Props

### `Carousel`

This wraps a carousel in dynamic context context, automatically providing all functionality for `CarouselItems`, `CarouselItem`, and `CarouselPagination`.

| Name      | Type         | Default | Description                                                                                                |
| --------- | ------------ | ------- | ---------------------------------------------------------------------------------------------------------- |
| children? | ReactElement | -       | Display any content within the carousel context. This may include `CarouselItem` and `CarouselPagination`. |

### `CarouselItems`

The `CarouselItems` component automatically updates the carousel context when interacted with.

The `CarouselItems` component accepts most props from the React Native `FlatList` component, while other props are predfined and cannot be modified. There are also some additional carousel specific props:

| Name                 | Type           | Default | Description                                                                                                                    |
| -------------------- | -------------- | ------- | ------------------------------------------------------------------------------------------------------------------------------ |
| children?            | ReactElement[] | -       | Accepts React elements to render as carousel items. To function correctly, these should be `CarouselItem` comppnents.          |
| enabled?             | boolean        | true    | Enable or disable the carousel                                                                                                 |
| inactiveItemOpacity? | number         | 1       | Fade items outside of the active carousel viewport (use in conjunction with `showOverflow`)                                    |
| itemWidth?           | number         | -       | Specify the width of carousel items if different from `width`. Useful for revealing the previous/next item within the viewport |
| onSnapToItem?        | () => void     | -       | Callback each time a new item is focused in the carousel viewport                                                              |
| showOverflow?        | boolean        | false   | Visually reveal the items outside of the carousel viewport                                                                     |
| width                | number         | -       | Carousel viewport width                                                                                                        |

For more information about any of the above props from the `FlatList` component, see the React Native FlatList [documentation](https://reactnative.dev/docs/flatlist).

### `CarouselItem`

The `CarouselItem` component automatically receives props from the parent `CarouselItems` component. Please ensure that you always wrap each of your carousel items in `CarouselItem`.

| Name      | Type          | Default | Description                                                                                                                       |
| --------- | ------------- | ------- | --------------------------------------------------------------------------------------------------------------------------------- |
| children? | ReactElement  | -       | Display any content within each carousel item.                                                                                    |
| key?      | number/string | -       | Provides a unique render key for each carousel item. If no `key` is provided then it will fall back to the `id`, then array index |
