import { Meta } from '@storybook/addon-docs/blocks';
import { version } from '../../package.json';
import { Box } from '../../src';
import { BackToTopButton, DynamicImage } from '../components';
import imgDark from './phone-dark.png';
import img from './phone-light.png';

<Meta title="Introduction" />
<BackToTopButton />
<Box alignItems='center'>
<DynamicImage
  width={500}
  height="auto"
  alt="UW Design Systems - Native UI"
  title="UW - Native UI"
  darkSrc={imgDark}
  lightSrc={img}
/>

# UW - Native UI

React Native component library for building UIs at UW.

</Box>

Current version: v{version}

- [Installation](#installation)
- [Additional packages](#additional-packages)
  - [Linking the fonts to be used in your project](#linking-the-fonts-to-be-used-in-your-project)
    - [Using Expo](#using-expo)
- [Babel configuration](#babel-configuration)
- [Jest configuration](#jest-configuration)

## Installation

Assuming you already have React Native installed and your project set up, to get started install the library and it's peer dependencies.

```console
npm install @utilitywarehouse/native-ui
```

To install the peer dependencies, you can run the following command:

```console
npm install react-native-unistyles react-native-edge-to-edge react-native-nitro-modules@0.29.3 react-native-svg react-native-reanimated react-native-worklets react-native-gesture-handler
```

For more information on how to install and configure `react-native-svg`, `react-native-gesture-handler` and `react-native-reanimated`,
please refer to the [react-native-svg](https://github.com/software-mansion/react-native-svg?tab=readme-ov-file#installation),
[react-native-gesture-handler](https://docs.swmansion.com/react-native-gesture-handler/docs/) and
[react-native-reanimated](https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/getting-started) documentation.

Why so many dependencies? The `@utilitywarehouse/native-ui` library is built on top of the following libraries:

- [React Native Unistyles](https://www.unistyl.es/)
- [React Native SVG](https://github.com/software-mansion/react-native-svg)
- [React Native Reanimated](https://docs.swmansion.com/react-native-reanimated/)
- [React Native Gesture Handler](https://docs.swmansion.com/react-native-gesture-handler/docs/)

So why do we need to install `react-native-nitro-module`? It's because of React Native autolinking and transitive dependencies,
read more about it [here](https://shift.infinite.red/transitive-dependencies-and-react-native-autolinking-d4d4b7a651cf).

## Additional packages

The `@utilitywarehouse/native-ui` library uses two packages under the hood for colours and icons, feel free to install them if you need to use them in your project.

```console
npm install @utilitywarehouse/colour-system @utilitywarehouse/react-native-icons
```

You will need to include the **Aeonik** and **Work Sans** fonts.
The easiest way to do this is to use the `@utilitywarehouse/fontsource` package.

```console
npm install @utilitywarehouse/fontsource
```

Next, create or update your `react-native.config.js` file in the root directory and paste the code below inside it:

```js
module.exports = {
  project: {
    ios: {},
    android: {},
  },
  assets: [
    './node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans',
    './node_modules/@utilitywarehouse/fontsource/files/truetype/Aeonik',
  ],
};
```

### Linking the fonts to be used in your project

Now we need to link them so we'll be able to use them in any files inside the project. To do that, run the following command:

```console
npx react-native-asset
```

#### Using Expo

If you are using Expo, you can use the `expo-font` and [`expo-xml-font`](https://github.com/Armster15/expo-xml-font) packages to load the fonts.
Here is an example of how to load the fonts in your `App.tsx` file:

```tsx
import React from 'react';
import { useFonts } from 'expo-font';
import App from './src/App';

export default () => {
  const [loaded] = useFonts({
    'Aeonik-Regular': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/Aeonik/Aeonik-Regular.otf'),
    'Aeonik-Bold': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/Aeonik/Aeonik-Bold.otf'),
    'WorkSans-Thin': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-Thin.ttf'),
    'WorkSans-ExtraLight': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-ExtraLight.ttf'),
    'WorkSans-Light': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-Light.ttf'),
    'WorkSans-Regular': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-Regular.ttf'),
    'WorkSans-SemiBold': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-SemiBold.ttf'),
    'WorkSans-Medium': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-Medium.ttf'),
    'WorkSans-Bold': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-Bold.ttf'),
    'WorkSans-ExtraBold': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-ExtraBold.ttf'),
    'WorkSans-Black': require('./node_modules/@utilitywarehouse/fontsource/files/truetype/WorkSans/WorkSans-Black.ttf'),
  });

  if (!loaded) return null;

  return <App />;
};
```

Follow the [expo-xml-font](https://github.com/Armster15/expo-xml-font) documentation to learn how to use the `expo-xml-font` package.

## Babel configuration

You will need to add the following Babel plugin to your `babel.config.js` file:

```js
const unistylesPluginOptions = {
  autoProcessImports: ['@utilitywarehouse/native-ui'],
  autoProcessPaths: ['@utilitywarehouse/native-ui'],
  autoProcessRoot: 'src', // Adjust this to your project's structure
  debug: false, // Set to true for debugging purposes
};

module.exports = {
  presets: ['module:metro-react-native-babel-preset'],
  plugins: [
    // other plugins...
    'react-native-reanimated/plugin',
    ['react-native-unistyles/plugin', unistylesPluginOptions],
  ],
};
```

## Jest configuration

If you are using Jest for testing, you will need to add the following configuration to your `jest.config.js` file:

```js
module.exports = {
  // other Jest configurations...
  setupFiles: ['react-native-unistyles/mocks'],
  // other Jest configurations...
};
```

You'll also need to add the following to your `jest.setup.js` file:

```js
import { StyleSheet, themes, breakpoints } from '@utilitywarehouse/native-ui';

StyleSheet.configure({
  themes,
  breakpoints,
});

// rest of your setup...
```
