import { Meta, Description, Canvas, ArgTypes } from '@storybook/addon-docs/blocks';

import * as RadioGroupStories from './RadioGroup.stories';

import { Box } from '../Box';
import { Divider } from '../Divider';
import { Flex } from '../Flex';
import * as RadioStories from '../Radio/Radio.stories';
import { Text } from '../Text';

import { DocsHeader } from '../../storybook-components';

<Meta title="Web UI / Documentation / RadioGroup" />

<DocsHeader
  componentName="RadioGroup"
  figmaLink="https://www.figma.com/design/4FFYTLWJ2hQpj36JplQQUw/UW-Web-UI?node-id=902-9379"
  stories={RadioGroupStories}
/>

<Canvas of={RadioGroupStories.Workshop} sourceState="none" />

- [Alternatives](#alternatives)
- [Accessibility](#accessibility)
- [Keyboard interactions](#keyboard-interactions)
- [Helper text](#helper-text)
- [Error message](#error-message)
- [Content Width](#content-width)
- [Controlled](#controlled)
- [Advanced Usage](#advanced-usage)
- [RadioGroup props](#radiogroup-props)
- [Radio & RadioTile](#radio-&-radiotile)
  - [Accessibility](#accessibility)
  - [Props](#props)

## Alternatives

- RadioGridGroup: For presenting radios in columns or a grid layout.
- RadioGroupRoot: For presenting radios, outside of a fieldset, without label, helper text, or error message.
- CheckboxGroup: For multi-select.
- CheckboxGridGroup: For multi-select in columns or grid layout.

## Accessibility

The necessary aria props, such as `aria-labelledby`, `aria-describedby` and
`aria-errormessage` are handled internally, however you can pass these and
other aria props, such as `aria-label`, to the `RadioGroup` and `Radio`
components yourself if you need to.

## Keyboard interactions

<Flex direction="column" gap={2}>
  <Box display="flex" alignItems="baseline">
    <Box width={300}>
      <Text component="span">Key</Text>
    </Box>
    <Text component="span">Description</Text>
  </Box>
  <Divider />
  {[
    {
      key: 'Tab',
      description:
        'Moves focus to either the checked radio item or the first radio item in the group.',
    },
    {
      key: 'Shift+Tab',
      description:
        'Moves focus to either the checked radio item or the last radio item in the group.',
    },
    {
      key: 'Space',
      description: 'When focus is on an unchecked radio item, checks it.',
    },
    {
      key: 'Arrow Down / Arrow Right',
      description: 'Moves focus and checks the next radio item in the group.',
    },
    {
      key: 'Arrow Up / Arrow Left',
      description: 'Moves focus and checks the previous radio item in the group.',
    },
  ].map((kbi, i) => (
    <>
      <Box display="flex" alignItems="baseline">
        <Box width={300}>
          <kbd>{kbi.key}</kbd>
        </Box>
        <Text component="span" variant="body">
          {kbi.description}
        </Text>
      </Box>
      {i < 4 ? <Divider /> : null}
    </>
  ))}
</Flex>

## Helper text

The Radio group can display a secondary message as a helper text. This can be
either above or below the group's radio items. While the radio items can also
display a helper text, these will not be displayed if the radio group has a
helper text.

<Canvas of={RadioGroupStories.RadioHelperText} />

## Error message

In general, radio buttons should have a value selected by default. If this is
not the case, you can display an error if no value is selected when the form is
submitted.

<Canvas of={RadioGroupStories.ShowingError} />

## Content width

The width of the `RadioGroup` should be set by the parent layout, however it is
possible to independently set the width of the children using `contentWidth`
prop. This property is most useful when using the `RadioGroup` with the
`RadioTile` component.

By default it will set the width of the children to fit their content, however
you can set it to a specific width, or to `100%` to take up the full width of
the `RadioGroup`.

This is a responsive property, so you are able to set different widths for
different breakpoints.

<Canvas of={RadioGroupStories.ContentWidth} />

## Controlled

A controlled value can be provided using the value prop, which accepts a value
corresponding with the value prop of each `Radio`. The onChange event is fired
when the user selects a `Radio`.

<Canvas of={RadioGroupStories.Controlled} />

## Advanced Usage

For advanced usage you can compose the `RadioGroupRoot` component.

If you choose to do this, please make sure you properly label your components for accessibility. See [MagentaA11y](https://www.magentaa11y.com/checklist-web/radio/) for more info.

```tsx
<FormFieldGroup label="Label">
  <RadioGroupRoot>
    <Radio value="1" label="One" />
    <Radio value="2" label="Two" />
    <Radio value="3" label="Three" />
  </RadioGroupRoot>
</FormFieldGroup>


<Fieldset>
  <FieldsetLegend>
    <Heading variant="h1">Label</Heading>
  </FieldsetLegend>
  <RadioGroupRoot>
    <Radio value="1" label="One" />
    <Radio value="2" label="Two" />
    <Radio value="3" label="Three" />
  </RadioGroupRoot>
</Fieldset>
```

<Canvas of={RadioGroupStories.RadioGroupRootStory} />

## RadioGroup props

<details>
<summary><Text component="span" variant="body">Click to show `RadioGroup` props</Text></summary>

<ArgTypes of={RadioGroupStories} />

</details>

## Radio & RadioTile

The `Radio` & `RadioTile` components should be used within a `RadioGroup` component.

### Accessibility

The `Radio` and `RadioTile` are, by default, appropriately labelled when using
the `label` props, if you do not provide a label, you must specify an
`aria-label` or `aria-labelledby` for accessibility.

### Props

<details>
<summary><Text component="span" variant="body">Click to show `Radio`/`RadioTile` props</Text></summary>

<ArgTypes of={RadioStories} />

</details>
