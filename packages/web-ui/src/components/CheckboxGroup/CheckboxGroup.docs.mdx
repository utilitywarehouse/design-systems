import { Meta, Canvas, ArgTypes } from '@storybook/addon-docs/blocks';

import * as Stories from './CheckboxGroup.stories';

import { Box } from '../Box';
import { Divider } from '../Divider';
import { Stack } from '../Stack';
import { Text } from '../Text';

import { DocsHeader } from '../../storybook-components';

<Meta title="Web UI / Documentation / CheckboxGroup" />

<DocsHeader
  componentName="CheckboxGroup"
  figmaLink="https://www.figma.com/design/4FFYTLWJ2hQpj36JplQQUw/UW-Web-UI?node-id=910-9379"
  stories={Stories}
/>

<Canvas of={Stories.Workshop} sourceState="none" />

- [Alternatives](#alternatives)
- [Accessibility](#accessibility)
- [Helper text](#helper-text)
- [Error message](#error-message)
- [Content width](#content-width)
- [Controlled](#controlled)
- [Advanced Usage](#advanced-usage)
- [Props](#props)

## Alternatives

- CheckboxGridGroup: For presenting checkboxes in columns or a grid layout.
- CheckboxGroupRoot: For presenting checkboxes, outside of a fieldset, without label, helper text, or error message.
- RadioGroup: For single-select
- RadioGridGroup: For single-select in columns or a grid layout.

## Accessibility

The necessary aria props, such as `aria-labelledby`, `aria-describedby` and
`aria-errormessage` are handled internally, however you can pass these and
other aria props, such as `aria-label`, to the `CheckboxGroup`, `Checkbox` &
`CheckboxTile` components yourself if you need to.

### Keyboard interactions

<Stack spacing={1} divider={<Divider />}>
  <Box display="flex" alignItems="baseline">
    <Box width={300}>
      <Text component="span" variant="legalNote">
        {'Key'}
      </Text>
    </Box>
    <Text component="span" variant="legalNote">
      {'Description'}
    </Text>
  </Box>
  {[
    { key: 'Tab', description: 'Moves keyboard focus to the checkbox.' },
    { key: 'Space', description: 'Toggles checkbox between checked and unchecked states.' },
  ].map(kbi => (
    <Box display="flex" alignItems="baseline">
      <Box width={300}>
        <kbd>{kbi.key}</kbd>
      </Box>
      <Text component="span" variant="body">
        {kbi.description}
      </Text>
    </Box>
  ))}
</Stack>

## Helper text

The Checkbox group can display a secondary message as a helper text. This can be
either above or below the group's checkbox items. While the checkbox items can also
display a helper text, these will not be displayed if the checkbox group has a
helper text.

<Canvas of={Stories.CheckboxHelperText} />

## Error message

You can display an error using the `error` & `errorMessage` props.

<Canvas of={Stories.ShowingError} />

## Content width

The width of the `CheckboxGroup` should be set by the parent layout, however it is
possible to independently set the width of the children using `contentWidth`
prop. This property is most useful when using the `CheckboxGroup` with the
`CheckboxTile` component.

By default it will set the width of the children to fit their content, however
you can set it to a specific width, or to `100%` to take up the full width of
the `CheckboxGroup`.

This is a responsive property, so you are able to set different widths for
different breakpoints.

<Canvas of={Stories.ContentWidth} />

## Controlled

A controlled value can be provided using the value prop, which accepts a string
array, corresponding to the value props of each child `Checkbox`. The
`onValueChange` event is fired when the user selects or deselects a `Checkbox`
child of the group.

<Canvas of={Stories.Controlled} />

## Advanced Usage

For advanced usage you can compose the `CheckboxGroupRoot` component.

If you choose to do this, please make sure you properly label your components for accessibility. See [MagentaA11y](https://www.magentaa11y.com/checklist-web/checkbox/) for more info.

```tsx
<FormFieldGroup label="Label">
  <CheckboxGroupRoot>
    <Checkbox value="1" label="One" />
    <Checkbox value="2" label="Two" />
    <Checkbox value="3" label="Three" />
  </CheckboxGroupRoot>
</FormFieldGroup>


<Fieldset>
  <FieldsetLegend>
    <Heading variant="h1">Label</Heading>
  </FieldsetLegend>
  <CheckboxGroupRoot>
    <Checkbox value="1" label="One" />
    <Checkbox value="2" label="Two" />
    <Checkbox value="3" label="Three" />
  </CheckboxGroupRoot>
</Fieldset>
```

<Canvas of={Stories.CheckboxGroupRootStory} />

## Props

<ArgTypes of={Stories} />
