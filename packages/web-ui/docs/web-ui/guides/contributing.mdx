import { Meta } from '@storybook/blocks';

<Meta title="Web UI / Guides / Contributing" />

# Contributing

Thank you for your interest in contributing to UW Web UI!
While we welcome contributions to the codebase and documentation, we're not
currently able to support significant contributions such as new components.
Please get in touch with the core team directly if you want to discuss any
aspect of the Design Systems projects.

- [Getting Started](#getting-started)
- [Linting & formatting](#linting-&-formatting)
- [Making Changes](#making-changes)
- [Using the styled function](#using-the-styled-function)
- [Documentation Contributions](#documentation-contributions)
- [Changesets](#changesets)

## Getting Started

Run setup in the root of the repo. This will install [pnpm](https://pnpm.io/),
which we use to manage this monorepo.

**Make sure you're using node v16.10+ before running the below commands**

```console
npm run setup
```

Next, install dependencies across all packages, and build the local
packages.

```
pnpm install
pnpm build
```

## Linting & formatting

Linting and formatting is done separately.

```
pnpm lint:fix
pnpm format
```

To lint, format & build in a single command:

```
pnpm run checks
```

## Making Changes

If you want to update some documentation or fix a bug:

1. Clone this repository
1. [Create a separate branch](https://docs.github.com/en/desktop/contributing-and-collaborating-using-github-desktop/managing-branches)
   for your changes
1. Make your changes, ensuring you have run the linting & formatting commands before oprning your PR.
1. Create a changeset by running `pnpm changeset`. [More info](https://github.com/changesets/changesets/blob/main/docs/adding-a-changeset.md).
1. Push your branch and open a PR ðŸš€

## Using the styled function

When styling components, please use the internal `styled()` utility, so that any component you build will have the
`sx` prop available on it, with the correct types. Unfortunately this does mean you will not be able to
make use of the [component selectors API](https://mui.com/system/styled/#how-to-use-components-selector-api).

## Documentation Contributions

There are a number of ways you can add documentation for components and for more general information.

### General Documentation

You can update existing documenation, such as this page, or add new
documentation, in the [docs](https://github.com/utilitywarehouse/design-systems/tree/main/packages/web-ui/docs) directory
of the `web-ui` package. These docs use `mdx` and are rendered in our online
[Storybook](https://uw-web-ui.vercel.app/).

### Component Documentation

Each component will be documented in Storybook via component stories. These
stories are as much a playground and testing/development environment that exist
to ensure the built components conform to expectations. They also offer an
opportunity for collaboration between developers and designers. There are some
standard stories that you can expect to see for components:

- **Kitchen Sink**: this story collects all possible combinations in a single
  place, whether that is variants, sizes or differences on background colours.
  It is a place to get a quick overview for what a component offers.
- **Workshop**: this story will usually provide a single instance of a
  component, with access to most, if not all, of it's props, offering a
  workshop playground to try out the different controls available.

Alongside these stories, each component should have a `docs.mdx` file. This is
where the bulk of the documentation will live, and should cover descriptions of
props, alternatives, patterns, accessibility guidelines, and everything else
that will enable and support best use of the component.

Components should also have their props documented via
[JSDoc](https://jsdoc.app/). These comments will, in turn, be used to generate
prop documentation. This is currently not working, but
[a solution is being investigated](https://linear.app/utilitywarehouse/issue/UWDS-253/component-props-documentation-scripts).

## Changesets

UW Web UI uses [changesets](https://github.com/changesets/changesets) for
versioning, publishing and automating changelogs. This means that you need to
add a changeset by running `pnpm changeset`, you will then be prompted to select
which package(s) to include in the changeset, and then a bump type from `major`,
`minor` or `patch`, and finally you will need to add a message to be included in
the next release and associated changelog.

Not all changes require changesets, so Pull Requests are not blocked if missing
a changeset, however you may be asked to add one, or one may be added for your
change.
